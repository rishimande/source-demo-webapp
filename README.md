# Energy Device & Credit Verification Dashboard

An investor-grade demo web application for monitoring and verifying solar energy device performance.

## Overview

This Next.js application provides a comprehensive dashboard for viewing:
- Real-time device status and metrics
- Daily power generation curves with battery behavior analysis
- 7-day envelope analysis with half-sine fitting
- Per-day verification diagnostics and rule compliance

## Tech Stack

- **Next.js 15** (App Router)
- **React 19**
- **TypeScript**
- **Tailwind CSS**
- **shadcn/ui** components
- **Recharts** for data visualization
- **date-fns** for date formatting

## Getting Started

### Prerequisites

- Node.js 18+ and npm

### Installation

1. Install dependencies:
```bash
npm install
```

2. Convert CSV data to JSON (required before first run):
```bash
npm run convert-data
```

3. (Optional) Add the 7-day envelope image:
   - Place the image at: `public/7_day_envelopes/compressed_fit_2025-05-14_to_2025-05-22.png`

4. Start the development server:
```bash
npm run dev
```

5. Open [http://localhost:3000](http://localhost:3000) in your browser.

## Project Structure

```
├── app/
│   ├── layout.tsx              # Root layout with header
│   ├── page.tsx                # Home page (redirects to /devices)
│   └── devices/
│       ├── page.tsx            # Device list view
│       └── [id]/
│           └── page.tsx        # Device detail view with tabs
├── components/
│   ├── ui/                     # shadcn/ui components
│   ├── daily-power-chart.tsx  # Daily power visualization
│   └── verification-table.tsx # Diagnostics table
├── lib/
│   ├── types.ts                # TypeScript interfaces
│   ├── load-data.ts            # Data loading utilities
│   └── utils.ts                # Helper functions
├── data/
│   ├── bquxjob_*.csv          # Raw heartbeat data (source)
│   ├── daily_metrics.csv       # Daily diagnostics (source)
│   ├── heartbeat.json          # Converted heartbeat data
│   └── daily_metrics.json      # Converted metrics data
├── scripts/
│   └── convert-data.js         # CSV to JSON conversion script
└── public/
    └── 7_day_envelopes/        # 7-day envelope images
```

## Data Pipeline

The app uses static data from two CSV sources:

1. **Heartbeat Data** (`bquxjob_22a0183e_197ec64eb48.csv`)
   - Raw device measurements (voltage, current, power)
   - Timestamped at ~15-minute intervals
   - Converted to `heartbeat.json` with derived fields

2. **Daily Metrics** (`daily_metrics.csv`)
   - Per-day verification diagnostics
   - Generated by offline Python algorithms
   - Contains sinusoidality, noise, and battery behavior analysis
   - Converted to `daily_metrics.json`

The conversion script (`npm run convert-data`) must be run whenever the source CSV files change.

## Features

### Device List View
- Overview of all devices (currently single device demo)
- Verification status badges
- Key metrics at a glance
- Quick navigation to device details

### Device Detail View

#### Tab 1: Daily Power
- Interactive date selector
- Power vs. local time chart (6:00-18:00)
- Battery full dip markers
- Day summary with verification status

#### Tab 2: 7-Day Envelope
- Visual representation of 7-day max envelope
- Half-sine fit overlay
- Window-level aggregated metrics
- Explanation of chart elements

#### Tab 3: Verification Diagnostics
- Comprehensive per-day metrics table
- Filter to show only failing days
- All verification rules displayed:
  - Sinusoidality (NRMSE ≤ 5%)
  - Negative noise constraint
  - No generation outside daylight hours
  - Battery dip detection

## Design Philosophy

The UI is designed to be:
- **Trust-first**: Clean, professional, audit-ready
- **Infrastructure-focused**: Emphasis on data integrity
- **Investor-grade**: Enterprise aesthetics with muted colors
- **Responsive**: Works on desktop, tablet, and mobile

Color scheme:
- White background with soft grey dividers
- Emerald green for verified/passing states
- Amber for warnings/review needed
- Sky blue for primary actions
- Purple for battery behavior markers

## Configuration

Key constants in `lib/types.ts`:
- `DEVICE_ID`: Static device identifier
- `DEVICE_NAME`: Display name for the device
- `LOCAL_TIME_OFFSET`: UTC offset for local time calculations (-6)

## Notes

- This is a **static, read-only** demo application
- No backend, database, or live data ingestion
- All Python algorithms are pre-computed in the CSV files
- The app only visualizes and presents the existing data

## Development

Build for production:
```bash
npm run build
```

Start production server:
```bash
npm start
```

Lint code:
```bash
npm run lint
```

## License

Proprietary - Inergy Source Intelligence Demo

